# 语音信号处理系统 - Qt图形界面

## 🎯 新增功能

### ✨ Qt图形界面
- **直观的图形界面** - 无需命令行操作
- **实时录音功能** - 支持麦克风录音
- **实时分析显示** - 录音过程中显示音频特征
- **可视化分析结果** - 图表展示分析结果
- **多标签页界面** - 信号显示、分析结果、日志分离

### 🎤 录音功能
- **一键录音** - 点击按钮开始/停止录音
- **参数调节** - 可调节采样率、录音时长
- **实时监控** - 录音过程中显示音频特征
- **自动保存** - 录音完成后可保存为WAV文件

### 📊 可视化功能
- **信号波形显示** - 实时显示音频信号
- **分析结果图表** - 短时能量、平均幅度、过零率
- **端点检测可视化** - 语音段自动标记
- **多子图布局** - 清晰展示各项分析结果

## 🚀 快速开始

### 1. 安装依赖

#### 自动安装（推荐）
```bash
pip install -r requirements.txt
```

#### 手动安装
```bash
# 安装Python包
pip install -r requirements.txt

# Linux系统额外安装
sudo apt install portaudio19-dev python3-pyaudio python3-pyqt5
```

### 2. 启动程序

#### Qt图形界面（推荐）
```bash
python run_gui_universal.py
```

#### 命令行界面
```bash
python main.py
```

## 🎮 界面使用指南

### 主界面布局
```
┌─────────────────┬─────────────────────────────┐
│   控制面板      │        显示区域              │
│                 │                             │
│ 文件操作        │  ┌─────────────────────────┐ │
│ - 加载音频      │  │    信号显示标签页        │ │
│ - 保存录音      │  │                         │ │
│                 │  └─────────────────────────┘ │
│ 录音控制        │  ┌─────────────────────────┐ │
│ - 开始/停止     │  │    分析结果标签页        │ │
│ - 参数设置      │  │                         │ │
│                 │  └─────────────────────────┘ │
│ 信号分析        │  ┌─────────────────────────┐ │
│ - 执行分析      │  │      日志标签页          │ │
│ - 参数调节      │  │                         │ │
│                 │  └─────────────────────────┘ │
│ 语音识别        │                             │
│ - 开始识别      │                             │
│ - 结果显示      │                             │
│                 │                             │
│ 实时分析        │                             │
│ - 启用/禁用     │                             │
│ - 信息显示      │                             │
└─────────────────┴─────────────────────────────┘
```

### 功能使用步骤

#### 1. 录音功能
1. 点击"开始录音"按钮
2. 对着麦克风说话
3. 点击"停止录音"按钮
4. 录音结果自动显示在信号显示标签页

#### 2. 音频分析
1. 加载音频文件或完成录音
2. 调节分析参数（帧长、帧移）
3. 点击"执行分析"按钮
4. 查看分析结果标签页的图表

#### 3. 语音识别
1. 确保有训练数据（按数字分类的音频文件）
2. 加载音频或录音
3. 选择分类器类型
4. 点击"开始识别"按钮
5. 查看识别结果

#### 4. 实时分析
1. 勾选"启用实时分析"
2. 开始录音
3. 实时查看音频特征信息

## 🔧 参数说明

### 录音参数
- **采样率**: 8000-48000 Hz，推荐16000 Hz
- **录音时长**: 1-60秒，可设置最大录音时间
- **声道数**: 单声道（立体声录音暂不支持）

### 分析参数
- **帧长**: 10-50毫秒，推荐25毫秒
- **帧移**: 5-25毫秒，推荐10毫秒
- **窗函数**: 矩形窗、汉明窗、汉宁窗

### 识别参数
- **分类器**: 简单识别器、高级识别器
- **特征**: 11种时域特征自动提取
- **置信度**: 识别结果可靠性评估

## 📁 文件结构

```
SpeechRecognition/
├── qt_interface.py          # Qt主界面
├── run_gui_universal.py      # 跨平台GUI启动器
├── main.py                  # 命令行界面
├── speech_processing/        # 核心处理包
│   ├── core/
│   │   ├── audio_recorder.py  # 新增：录音功能
│   │   ├── wav_reader.py
│   │   ├── frame_window.py
│   │   ├── time_domain_analysis.py
│   │   └── endpoint_detection.py
│   ├── recognition/
│   └── utils/
├── examples/                # 示例程序
├── data/                    # 数据目录
│   ├── audio/               # 音频文件
│   ├── results/             # 分析结果
│   ├── train/               # 训练数据
│   └── test/                # 测试数据
└── requirements.txt         # 依赖包列表
```

## 🐛 常见问题

### 1. 无法启动Qt界面
**问题**: 提示"无法启动Qt界面"
**解决**: 
```bash
# 安装PyQt5
pip install PyQt5

# 或使用conda
conda install pyqt
```

### 2. 录音功能无法使用
**问题**: 提示"无法开始录音"
**解决**:
```bash
# Linux系统
sudo apt install portaudio19-dev python3-pyaudio

# macOS系统
brew install portaudio
pip install pyaudio
```

### 3. 音频设备问题
**问题**: 找不到音频设备
**解决**:
- 检查麦克风是否连接
- 检查系统音频权限
- 尝试不同的采样率设置

### 4. 识别准确率低
**问题**: 语音识别结果不准确
**解决**:
- 确保训练数据质量
- 调整录音参数
- 使用更清晰的语音

## 🎓 教学使用

### 实验步骤
1. **基础录音** - 使用录音功能录制数字0-9
2. **信号分析** - 观察不同数字的时域特征
3. **端点检测** - 学习语音段自动分割
4. **特征提取** - 理解11种时域特征
5. **模式识别** - 训练和测试识别系统

### 学习要点
- **时域分析原理** - 短时能量、平均幅度、过零率
- **端点检测算法** - 双门限法实现
- **特征提取方法** - 11种时域特征计算
- **模式识别技术** - 模板匹配和机器学习

## 📈 性能优化

### 实时处理优化
- 使用较小的帧长提高响应速度
- 启用实时分析时注意CPU使用率
- 录音过程中避免其他音频应用

### 识别准确率优化
- 使用高质量的录音设备
- 保持一致的录音环境
- 充足的训练数据

## 🔄 更新日志

### v1.1.0 (新增Qt界面)
- ✨ 新增Qt图形界面
- 🎤 新增实时录音功能
- 📊 新增可视化分析结果
- 🔧 新增参数调节界面
- 📝 新增实时日志显示

### v1.0.0 (基础版本)
- 🎯 基础语音信号处理功能
- 🧠 简单数字识别器
- 📊 命令行界面
- 📚 完整示例程序

---

**开发团队**: DSP Lab  
**最后更新**: 2025年1月  
**技术支持**: 查看项目README.md获取更多信息
